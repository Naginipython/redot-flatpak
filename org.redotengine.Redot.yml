id: org.redotengine.Redot
runtime: org.freedesktop.Platform
runtime-version: "24.08"
sdk: org.freedesktop.Sdk
command: redot
build-options:
  finish-args:
    - --socket=wayland
    - --socket=x11
    - --share=network
    - --socket=pulseaudio
    - --filesystem=host
modules:
  - shared-modules/glu/glu-9.json
  - name: scons
    buildsystem: simple
    cleanup: ["*"]
    sources:
      - type: archive
        sha256: cad573b329b6a5bc7e654b01f0231064acc979026af68a9e467ddb32bf2ee501
        url: https://downloads.sourceforge.net/project/scons/scons/4.8.1/SCons-4.8.1.tar.gz
        x-checker-data:
          type: anitya
          project-id: 4770
          url-template: https://downloads.sourceforge.net/project/scons/scons/$version/SCons-$version.tar.gz
    build-commands:
      - pip3 install --no-index --no-build-isolation --prefix=/app .
  - name: redot
    buildsystem: simple
    build-commands:
      - scons
      - install -D -m755 bin/redot.linuxbsd.editor.* /app/bin/redot
    sources:
      - type: git
        url: https://github.com/Redot-Engine/redot-engine.git
        branch: 4.3
